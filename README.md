# jedis_util
使用redis实现分布式锁 可解决等待线程自旋造成CPU资源浪费

## 简单分布式锁

### 原理

使用redis的SETNX实现，使用BLPOP实现释放锁时的通知，可防止等待线程自旋浪费cpu资源

### 问题

1. 可能会出现redis key超时时，锁通知队列中没有通知，造成假性死锁，需要等待下一个获得锁的线程进行通知
2. 锁释放通知列表键 在所有请求处理完成后 不会自动删除 但在实际场景中可以接受

### 解决方案

1. 使用BLPOP设置超时时间，使锁定时间可控，同时控制线程饥饿时间
2. 另起一个线程检测redis中所有的锁释放通知队列的长度，如果对应的锁标识为未赋值则通知释放锁消息
